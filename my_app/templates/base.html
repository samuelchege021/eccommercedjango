

{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Widewingsplumbers</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
<link href="{% static "img/favicon.png"%}" rel="icon">
  <link href="{%static "img/apple-touch-icon.png"%}" rel="apple-touch-icon">

  <!-- Fonts -->

  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- Popper.js for Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>
  <!-- Bootstrap JS -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <!-- Your custom JavaScript -->


  <!-- Vendor CSS Files -->

  <link href="{%static "vendor/bootstrap/css/bootstrap.min.css"%}" rel="stylesheet">
  <link href="{%static "vendor/bootstrap-icons/bootstrap-icons.css"%}" rel="stylesheet">
  <link href="{%static "vendor/aos/aos.css"%}" rel="stylesheet">
  <link href="{%static "vendor/glightbox/css/glightbox.min.css"%}" rel="stylesheet">
  <link href="{%static "vendor/swiper/swiper-bundle.min.css"%}" rel="stylesheet">


  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>



  <link href="{% static "css/main.css"%}" rel="stylesheet">

  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>

  <!-- =======================================================
  * Template Name: Vesperr
  * Template URL: https://bootstrapmade.com/vesperr-free-bootstrap-template/
  * Updated: Jun 29 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body class="index-page">

  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center">

      <a href="index.html" class="logo d-flex align-items-center me-auto">
        <!-- Uncomment the line below if you also wish to use an image logo -->
        <!-- <img src="assets/img/logo.png" alt=""> -->
        <h1 class="sitename">Vesperr</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="#hero" class="active">Home<br></a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#about">purchase</a></li>


          
          <li><a href="#services">Services</a></li>
        
          
          <li><a href="{%url 'checkout'%}">CheckOut</a></li>
          <li><a href="#team">Tracker</a></li>




          {% comment %} <li class="dropdown"><a href="#"><span>Dropdown</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul> {% endcomment %}
              {% comment %} <li><a href="#">Dropdown 1</a></li>
              <li class="dropdown"><a href="#"><span>Deep Dropdown</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
                <ul>
                  <li><a href="#">Deep Dropdown 1</a></li>
                  <li><a href="#">Deep Dropdown 2</a></li>
                  <li><a href="#">Deep Dropdown 3</a></li>
                  <li><a href="#">Deep Dropdown 4</a></li>
                  <li><a href="#">Deep Dropdown 5</a></li>
                </ul>
              </li>
              <li><a href="#">Dropdown 2</a></li>
              <li><a href="#">Dropdown 3</a></li>
              <li><a href="#">Dropdown 4</a></li>
            </ul>
          </li> {% endcomment %}


          <li> {% if request.user.is_authenticated %}

            <button type="button" class="btn btn-dark ml-3" id="popcart" data-container="body" data-toggle="popover" data-placement="bottom" data-html="true">
              Cart(<span id="cart">0</span>)
          </button>
          
          
           
            <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
            </nav>
          
            <a class="btn-getstarted" href="index.html#about">Welcome, {{ user.username }}</a>
            <li><a href="/arkauth/logout">Logout</a></li>
          
          {% else %}
            <li><a href="/arkauth/login">Login</a></li>
          {% endif %}
          </li>

        

        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

     

      
  
  


    </div>
  </header>





  {%block content%}


  {%endblock%}



</main>

<footer id="footer" class="footer">

  <div class="container">
    <div class="copyright text-center ">
      <p>Â© <span>Copyright</span> <strong class="px-1 sitename">Vesperr</strong> <span>All Rights Reserved</span></p>
    </div>
    <div class="social-links d-flex justify-content-center">
      <a href=""><i class="bi bi-twitter-x"></i></a>
      <a href=""><i class="bi bi-facebook"></i></a>
      <a href=""><i class="bi bi-instagram"></i></a>
      <a href=""><i class="bi bi-linkedin"></i></a>
    </div>
    <div class="credits">
      <!-- All the links in the footer should remain intact. -->
      <!-- You can delete the links only if you've purchased the pro version. -->
      <!-- Licensing information: https://bootstrapmade.com/license/ -->
      <!-- Purchase the pro version with working PHP/AJAX contact form: [buy-url] -->
      Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
    </div>
  </div>

</footer>

<!-- Scroll Top -->
<a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

<!-- Preloader -->
{% comment %} <div id="preloader"></div>  {% endcomment %}

<!-- Vendor JS Files -->


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Include Bootstrap's JS -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<!-- Your custom JavaScript -->

<script src="{%static "admin/js/Popper.js"%}"></script>
<script src="{%static "vendor/bootstrap/js/bootstrap.bundle.min.js"%}"></script>
<script src="{%static "vendor/php-email-form/validate.js"%}"></script>
<script src="{%static "vendor/aos/aos.js"%}"></script>
<script src="{%static "vendor/glightbox/js/glightbox.min.js"%}"></script>
<script src="{%static "vendor/purecounter/purecounter_vanilla.js"%}"></script>
<script src="{%static "vendor/swiper/swiper-bundle.min.js"%}"></script>
<script src="{%static "vendor/imagesloaded/imagesloaded.pkgd.min.js"%}"></script>
<script src="{%static "vendor/isotope-layout/isotope.pkgd.min.js"%}"></script>
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->



<!-- Main JS File -->
<script src="{%static "js/main.js"%}"></script>
<script>
  // Initialize cart from localStorage or create a new one
  var cart = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : {};
  updateCart(cart);

  // Handle click event for adding to cart
  $('.divpr').on('click', 'button.cart', function() {
      var idstr = this.id.slice(2); // Remove 'pr' from id
      if (cart[idstr]) {
          cart[idstr][0] += 1; // Increment quantity
      } else {
          var name = document.getElementById('namepr' + idstr).innerHTML;
          var price = document.getElementById('pricepr' + idstr).innerHTML;
          cart[idstr] = [1, name, price]; // Add new item with quantity 1
      }
      updateCart(cart);
      localStorage.setItem('cart', JSON.stringify(cart)); // Save cart to localStorage
      document.getElementById('cart').innerHTML = Object.keys(cart).length; // Update cart item count
  });

  // Initialize popover
  $('#popcart').popover();

  // Function to update popover content
  function updatepopover(cart) {
      var popStr = "<h5>Items in your cart</h5><div class='mx-2 my-2'>";
      var i = 1;
      for (var item in cart) {
          popStr += "<b>" + i + "</b>. " + cart[item][1].slice(0, 19) + "... " + "<b>" + cart[item][0] + "</b> Qty<br>";
          i++;
      }
      popStr += "</div><a href='/checkout'><button class='btn btn-success'>Checkout</button></a> <button class='btn btn-dark' onclick='clearCart()'>Clear Cart</button>";
      document.getElementById('popcart').setAttribute('data-content', popStr);
      $('#popcart').popover('show');
  }

  // Function to clear cart
  function clearCart() {
      for (var item in cart) {
          document.getElementById('divpr' + item).innerHTML = '<button id="pr' + item + '" class="btn btn-success cart btn-sm mt-0">AddToCart</button>';
      }
      localStorage.clear();
      cart = {};
      updateCart(cart);
      document.getElementById('cart').innerHTML = '0'; // Reset item count display
      $('#popcart').popover('hide'); // Hide popover after clearing the cart
  }

  // Handle click event for minus button
  $('.divpr').on('click', 'button.minus', function() {
      var idStr = this.id.slice(7); // Assuming button id is 'minus' + itemId
      var itemId = idStr;
      if (cart[itemId]) {
          cart[itemId][0] = Math.max(0, cart[itemId][0] - 1);
          document.getElementById('val' + itemId).innerHTML = cart[itemId][0];
          updateCart(cart);
      }
  });

  // Handle click event for plus button
  $('.divpr').on("click", "button.plus", function() {
      var idStr = this.id.slice(6); // Assuming button id is 'plus' + itemId
      var itemId = idStr;
      if (cart[itemId]) {
          cart[itemId][0] += 1;
          document.getElementById('valpr' + itemId).innerHTML = cart[itemId][0];
          updateCart(cart);
      }
  });

  // Function to update cart UI
  function updateCart(cart) {
      updatepopover(cart);
      document.getElementById('cart').innerHTML = Object.keys(cart).length;
  }
</script>




</body>

</html>
